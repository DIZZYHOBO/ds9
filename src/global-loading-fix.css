/*
 * Global Loading Screen Fix for DS9 (Voyager fork)
 * 
 * This CSS makes loading screen backgrounds transparent throughout the app.
 * The spinner remains visible, but you won't see the solid color background.
 * 
 * INSTALLATION: Import this file in your main index.css or App.tsx:
 *   import "./global-loading-fix.css";
 * 
 * Or add these styles to the bottom of src/index.css
 */

/* 
 * Target Loading component and similar loading wrappers
 * These typically use inline styles with display:flex, centered, full height
 */

/* Make IonContent background transparent during loading */
ion-content::part(background) {
  background: transparent !important;
}

/* 
 * Target the common loading pattern: full-height centered flex container
 * This is used throughout Voyager for loading states
 */
ion-content > div[style*="height"][style*="flex"][style*="center"],
ion-content > div[style*="100%"][style*="flex"],
ion-content div[style*="height: 100%"][style*="display: flex"][style*="justify-content: center"],
ion-content div[style*="height:100%"][style*="display:flex"],
.ion-page div[style*="height: 100%"][style*="display: flex"][style*="justify-content: center"] {
  background: transparent !important;
}

/*
 * Target any element that contains only an IonSpinner as a loading indicator
 * This catches most loading states
 */
div:has(> ion-spinner:only-child) {
  background: transparent !important;
}

/* Target spinner containers with centered content */
div[style*="justify-content: center"][style*="align-items: center"]:has(ion-spinner) {
  background: transparent !important;
}

/*
 * Target Virtua (virtual list) loading states
 * Voyager uses Virtua for virtual scrolling lists
 */
[data-virtuoso-scroller="true"] {
  background: transparent !important;
}

[data-virtuoso-scroller="true"] > div:first-child {
  background: transparent !important;
}

/*
 * Target specific Loading component patterns
 * Common in Ionic/React apps
 */
.loading-container,
.loading-wrapper,
.loading-overlay,
[class*="loading"],
[class*="Loading"] {
  background: transparent !important;
}

/*
 * Ensure the spinner itself stays visible with good contrast
 * Using a subtle shadow to make it visible on any background
 */
ion-spinner {
  --color: var(--ion-color-primary, #a855f7);
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5));
}

/*
 * Target page-level content during loading transitions
 */
.ion-page > ion-content {
  --background: transparent;
}

/*
 * Target any absolutely/fixed positioned loading overlays
 */
div[style*="position: absolute"][style*="inset"]:has(ion-spinner),
div[style*="position: fixed"][style*="inset"]:has(ion-spinner),
div[style*="position:absolute"][style*="inset"]:has(ion-spinner),
div[style*="position:fixed"][style*="inset"]:has(ion-spinner) {
  background: transparent !important;
}

/*
 * Target full-viewport loading containers
 */
div[style*="height: 100vh"]:has(ion-spinner),
div[style*="height:100vh"]:has(ion-spinner),
div[style*="min-height: 100%"]:has(ion-spinner),
div[style*="min-height:100%"]:has(ion-spinner) {
  background: transparent !important;
}

/*
 * Target flex containers that are commonly used for centering spinners
 */
div[style*="display: flex"][style*="justify-content: center"][style*="align-items: center"] {
  background: transparent !important;
}

/*
 * Ensure IonRefresher doesn't have a background color
 */
ion-refresher {
  background: transparent !important;
}

/*
 * Target any container using CSS variables for background
 */
div[style*="var(--ion-background-color)"]:has(ion-spinner),
div[style*="--ion-background-color"]:has(ion-spinner) {
  background: transparent !important;
}

/*
 * Module-specific overrides for common loading patterns
 */
[class*="module_"][class*="loading"],
[class*="module_"][class*="spinner"] {
  background: transparent !important;
}
